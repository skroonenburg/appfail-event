var appfail=(function(){var o=null;var d={"#F4AA00":"warning","#93F481":"success","#F2D100":"danger","#DBE750":"primary","#F41D59":"info"};var i={credits:{enabled:false},colors:["#F4AA00","#93F481","#F2D100","#DBE750","#F41D59"],tooltip:{borderRadius:0},chart:{renderTo:"chartContainer",type:"areaspline",defaultSeriesType:"line",marginRight:30,marginBottom:35,events:{load:function(){bootstrapgrid.refresh($("table[data-grid]:not(.standalone)"))}},backgroundColor:"rgba(255, 255, 255, 0.1)"},title:{text:""},yAxis:{title:{text:null},lineColor:"#E5E5E5",lineWidth:1,gridLineColor:"#F7F7F7",gridLineWidth:1,labels:{style:{color:"#767676",font:"11px Arial"}}},legend:{enabled:false},plotOptions:{areaspline:{lineWidth:0},series:{marker:{symbol:"circle",radius:5,lineWidth:3,lineColor:"#FFFFFF"},fillOpacity:0.7,events:{show:function(){bootstrapgrid.refresh($("table[data-grid]"));return true},hide:function(){bootstrapgrid.refresh($("table[data-grid]"));return true}}}}};var n=0;var k=null;var s=function(A,B){n=A;k=B};var j={credits:{enabled:false},colors:["#F4AA00","#C8F6C0","#F2D100","#DBE750","#F41D59"],chart:{renderTo:"pieChartContainer",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:false},title:{text:""},plotOptions:{pie:{allowPointSelect:true,cursor:"pointer",dataLabels:{enabled:false},showInLegend:true,marker:{symbol:"square"},size:"100%"}},legend:{layout:"vertical",borderWidth:0,verticalAlign:"middle",align:"right",borderRadius:0}};function u(D,C,E){var B="alert-"+(E===0?"error":E===1?"success":"info");var A=$("<div />").append('<a class="close" data-dismiss="alert">Ã—</a>').addClass("alert").addClass(B).append($("<h4 />").addClass("alert-heading").text(D)).append(C);$("#alertContainer").append(A)}function v(){var A=$.cookie("Alerts");if(A!==null){var B=$.parseJSON(A);if(B!==null){for(var C=0;C<B.length;C++){u(B[C].Title,B[C].Message,B[C].Type)}}$.cookie("Alerts",null,{path:"/"})}}function h(C,B,A){$.ajax(C,{dataType:"json",type:"POST",success:function(D){var G=$.extend(j,A,D);var E=[];for(var F in D){E.push([F,D[F]])}G.series=[{type:"pie",name:B,data:E}];new Highcharts.Chart(G)}})}function g(C,A,B){$.ajax(C,{dataType:"json",data:A.serialize(),type:"POST",success:function(F){var G=$.extend(i,B,F);var E=G.timeFormat;if(E){var D=null;if(E==="dateFormat"||E==="weekFormat"){D=e}else{if(E==="timeFormat"){D=x}}G.xAxis.labels={formatter:D};if(E==="weekFormat"){G.tooltip={formatter:function(){return z.apply(this,[D])}}}else{G.tooltip={formatter:function(){return y.apply(this,[D])}}}delete G.timeFormat}else{for(var H=0;H<G.series.length;H++){delete G.series[H].pointInterval;delete G.series[H].pointStart}}o=new Highcharts.Chart(G);$("#"+G.chart.renderTo).data("chartObj",o);$(".series-entry").each(function(M,K){var I=$(K);if(I.data("chart")!==G.chart.renderTo){return}var J=I.data("series-toggle");var L=false;var O=null;for(var N=0;N<o.series.length;N++){if(o.series[N]&&o.series[N].name===J){L=true;O=o.series[N]}}if(O!=null){$(".btn",I).removeClass("btn-primary").removeClass("btn-danger").removeClass("btn-info").removeClass("btn-success").removeClass("btn-warning").addClass("btn-"+d[O.color])}if(L){I.show()}else{I.hide()}})},error:function(){}})}function q(C,B,A){$(function(){h(C,B,A)})}function c(C,A,B){$(function(){g(C,A,B)});A.bind("submit",function(D){D.preventDefault();g(C,A,B)})}function y(A){return"<b>"+this.series.name+"</b><br/>"+A.apply({value:this.x})+": "+this.y+" failure occurrences"}function z(A){return"<b>"+this.series.name+"</b><br/>Week starting "+A.apply({value:this.x})+": "+this.y+" failure occurrences"}function e(){return Highcharts.dateFormat("%a %e %b",this.value)}function x(){return Highcharts.dateFormat("%e %b %l:%M%P",this.value)}function r(A){$(".dropdown-toggle",A).dropdown();if(jQuery.timeago){$("abbr.timeago",A).timeago()}$(".dropdown-chooser ul.dropdown-menu li a",A).click(function(F){F.preventDefault();var D=$(this);var C=D.parents(".dropdown-chooser");var H=C.data("dropdown-formlink");if(H){var E=$(H);E.val(D.data("dropdown-formvalue"));var G=C.data("dropdown-formsubmit");if(G){E.parents("form").submit()}}});bootstrapgrid.prepare(A);var B=function(C){return"-"+C+"days"};if($(".graph-dates",A).length>0){$(".graph-dates",A).each(function(G,E){var C=$(E);var D=C.find("input[type=text]");var F=C.data("graph-date-format");if(!F){F="mm/dd/yy"}var H=[];if(n<7){H=[{days:1,text:"Today",dateStart:"Today",dateEnd:"Today"},{days:2,text:"Yesterday",dateStart:"Yesterday",dateEnd:"Yesterday"},{days:3,text:"Previous 3 Days",dateStart:"-3days",dateEnd:"Today"},]}else{if(n<=21){H=[{days:1,text:"Today",dateStart:"Today",dateEnd:"Today"},{days:2,text:"Yesterday",dateStart:"Yesterday",dateEnd:"Yesterday"},{days:7,text:"Previous 7 Days",dateStart:"-7days",dateEnd:"Today"},{days:21,text:"Previous 21 Days",dateStart:"-21days",dateEnd:"Today"}]}else{H=[{days:1,text:"Today",dateStart:"Today",dateEnd:"Today"},{days:2,text:"Yesterday",dateStart:"Yesterday",dateEnd:"Yesterday"},{days:7,text:"Previous 7 Days",dateStart:"-7days",dateEnd:"Today"},{days:30,text:"Previous 30 Days",dateStart:"-30days",dateEnd:"Today"}]}}H.push({days:60,text:"Previous 60 Days",dateStart:"-60days",dateEnd:"Today"});H.push({days:90,text:"Previous 3 months",dateStart:"-3months",dateEnd:"Today"});H.push({days:180,text:"Previous 6 Months",dateStart:"-6months",dateEnd:"Today"});H.push({days:365,text:"Previous Year",dateStart:"-1year",dateEnd:"Today"});if(n<365){H.push({text:"Upgrade For Longer History",dateStart:"-1year",dateEnd:"Today"})}D.daterangepicker({dateFormat:F,datepickerOptions:{dateFormat:F},presetRanges:H,onOpen:function(){for(var J=0;J<H.length;J++){if(H[J].days>n){var I=$(".ui-daterangepicker-"+H[J].text.replace(/ /g,"")).addClass("disabled-link");I.click(function(K){K.preventDefault();K.stopPropagation();window.location=k});$("a",I).click(function(K){K.preventDefault();K.stopPropagation();window.location=k})}}$(".ui-daterangepicker-UpgradeForLongerHistory").click(function(K){window.location=k;K.preventDefault()})},onChange:function(){if(C.data("submission-event")){clearTimeout(C.data("submission-event"))}C.find(".date-value").text(D.val());var I=setTimeout(function(){if(!C.data("submitted")){C.data("submitted",true);C.submit();setTimeout(function(){C.data("submitted",false)},500)}},100);C.data("submission-event",I)}});$(".time-frame",C).click(function(I){D.click();if(I.stopPropagation){I.stopPropagation()}if(I.preventDefault){I.preventDefault()}else{event.returnValue=false}})})}m(A);b(A);$("*[rel=popover]",A).popover({placement:function(D,C){return $(C).data("popoverposition")}});$(".series-entry",A).each(function(F,D){var G=0;var C="primary";for(var E in d){if(G===F){C=d[E]}G++}$(".btn",this).addClass("btn-"+C);$(D).addClass("loaded")});$(".ajax-load",A).each(function(E,D){var C=$(D);$.ajax(C.data("ajax-load"),{success:function(F){C.html(F);r(C)},error:function(){C.html("An error occurred")}})})}function t(){$("body").on("click","*[data-url]",function(){window.location=$(this).data("url")});$("body").on("submit","form.disable-on-submit",function(){$("input[type=submit], button[type=submit]").attr("disabled","disabled")});$("body").on("click",".disable-click",function(){$(this).attr("disabled","disabled")});$("body").on("click",".disable-click-parent",function(){$(this).parents(".disable-click").attr("disabled","disabled")});$("body").on("click","*[data-post-url]",function(){var B=$(this).data("post-url");var A=$("<form />").attr("action",B).attr({method:"POST"});$("body").append(A);A.submit()});$("body").on("click","div.series-entry",function(D){D.preventDefault();var B=$(this);B.toggleClass("series-disabled").toggleClass("series-enabled");$(".series-status i",B).toggleClass("icon-ok").toggleClass("icon-remove");var J=B.is(".series-enabled");var C=B.data("chart");var I=B.data("series-toggle");if(C){var F=$("#"+C).data("chartObj");var H=null;for(var G=0;G<F.series.length;G++){if(F.series[G].name===I){H=F.series[G]}}if(H===null){return}if(J){H.show()}else{H.hide()}}else{var E=B.data("form");var A=$("#"+E);$("input[name=series]",A).remove();$("div.series-entry").each(function(M,L){var K=$(L);var N=K.data("series-toggle");if(K.is(".series-enabled")){A.append($("<input />").attr("type","hidden").attr("name","series").val(N))}});if(!B.data("form-disable-submit")){A.submit()}}})}function a(A,D){var B=null;if(!o){B="series=all"}else{B=null;for(var C in o.series){if(!o.series[C].visible){continue}if(B){B+="&"}else{B=""}B+="series="+encodeURI(o.series[C].name)}}D=bootstrapgrid.addSerializedValuesToUrl(D,B);return D}function m(A){$(".field-validation-error",A).each(function(){var C=$(this);var B=$("<span />").text(C.text());C.empty().append(B);w(B,C)});$(".validation-summary-errors").addClass("alert alert-error");jQuery.validator.unobtrusive.parse(A);$("form",A).each(function(){$(this).validate()})}function w(B){var A=$(B);A.parents(".control-group").addClass("error");A.addClass("help-inline")}function f(B,A){if(B.text()!==""){w(B,A)}else{$(A).parents(".control-group").removeClass("error")}if(!B.data("unobtrusiveContainer")){B.data("unobtrusiveContainer",$("<div/>"))}}function p(B){var A=jTour(B,{overlayOpacity:0.4,delayIn:500,speed:2,easing:"easeOutQuart"});$(".start-tour").css("visibility","visible").click(function(C){C.preventDefault();A.start()})}function b(B){var A=$(".gravatar",B);A.each(function(){var C=$(this);var D=C.data("gravatar");if(D){D=D.replace(/\s/g,"");C.prepend($.gravatar(D,{secure:true}))}})}function l(){dialoghelper.onPrepare(r);bootstrapgrid.onPrepare(r);t();r($(document));v()}if(window.prettyPrint){window.prettyPrint()}return{init:l,chart:c,dateformat:e,addChartSeriesToGrid:a,errorPlacement:f,pageTour:p.constructor,showCookieAlerts:v,pieChart:q,setMaxHistoryForDatePicker:s}}());$(function(){appfail.init()});
